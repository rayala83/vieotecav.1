{% extends "base.html" %}

{% load staticfiles %} 

{% block javascript %}
	<script>

		function Calcular(ele){

			var valor1 = 0, valor2 = 0, res = 0;
			var tr = ele.parentNode.parentNode;
			var nodes = tr.children;
			var total = document.getElementById("total");

			if (total.innerHTML == 'NaN') {
				total.innerHTML = 0;
			}
			for (var x = 0; x<nodes.length;x++) {

				if (nodes[x].firstChild.name == "valor_1"){
					valor1 = nodes[x].firstChild.valueAsDate;
				}	
				if (nodes[x].firstChild.name == "valor_2"){
					valor2 = nodes[x].firstChild.valueAsDate;
				}
			    if (nodes[x].firstChild.name == 'valor_res') {
			    	anterior = nodes[x].firstChild.valueAsDate;
					res = (valor2.getTime()-valor1.getTime());
					nodes[x].firstChild.value = res;
				}
			}

			total.innerHTML = parseFloat(total.innerHTML)+res -anterior;

		}	

	</script>
{% endblock %}



{% block content %}

<div id="video" class="text-center">
	<div class="overlay">
		<div class="container">
			<div class="section-title center">
				<form action="" method="post" enctype="multipart/form-data">
					{% csrf_token %}
					<table class="table table-bordered">
						<thead>
							<tr>
								<td>Video</td>
								<td>Miniatura</td>
								<td>Inicio</td>
								<td>Fin</td>
								<td>Duracion</td>
							</tr>
							
						</thead>
						<tbody>
							{% if conf %}
								{% for video in conf %}
								<tr>
									<td rowspan="{{ video|length }}"><iframe class="youtube-player" type="text/html" width="450" height="250"  src="https://www.youtube.com/embed/{{ video.video.url_video}}" frameborder="0"></iframe>
									<a class="btn btn-primary" align="center" href="/conferencia/{{video.ppt.id}}">Vista Previa</a>	
									<span id="total">0</span>			
									</td>
									
								</tr>
								{% endfor %}	
									
								{% for foto in slide %}	
									<tr>
										<td><img src="{{ foto.slide.url }}" width="200" alt="imagen" /></td>						
										<td><input type="time" name="valor_1" size="9" id="valor_1" class="item" value="0" onChange="Calcular(this);"></td>
										<td><input type="time" name="valor_2" size="9" id="valor_2" class="item" value="0" onChange="Calcular(this);"></td>	
										<td><input type="time" name="valor_res" size="9" id="valor_res" class="res" value="{{ foto.duracion }}"></td>									
									<tr>	
								{% endfor %}								
							
							{% else %}
								<h1>No hay registros de Conferencias</h1>
							{% endif %}
						</tbody>
					</table> 
				</form>	
			</div>
		</div>
	</div>	
</div>

{% endblock %}